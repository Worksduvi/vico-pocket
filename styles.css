:root { 
    --vbg: #0b0f1a; 
    --vacc: #3b82f6; 
    --vtxt: #e2e8f0; 
    --aura: rgba(59, 130, 246, 0.5); 
}

/* Base del cuerpo */
body { 
    background: var(--vbg); 
    color: var(--vtxt); 
    font-family: 'Inter', sans-serif; 
    margin: 0; 
    min-height: 100vh; 
    overflow-x: hidden; 
    transition: 0.3s; 
}

body.light-mode { --vbg: #f8fafc; --vtxt: #0f172a; --vacc: #2563eb; }

/* FIX: Asegurar que el contenido principal no sea tapado por el footer */
main { 
    padding-bottom: 160px !important; 
    position: relative;
    z-index: 1;
}

/* Capas y Clickabilidad */
section { position: relative; z-index: 10; }
button, input, select, textarea { 
    position: relative; 
    z-index: 20; 
    pointer-events: auto !important; 
}

/* Modales Pro (Fijan el desfase en Configuración) */
.modal-full { 
    position: fixed; 
    inset: 0; 
    background: var(--vbg); 
    z-index: 99999 !important; /* Prioridad máxima */
    padding: 2rem; 
    overflow-y: auto; 
    display: none; 
}

/* Chat Flotante (Fijan el desfase a la derecha) */
.chat-box { 
    width: 92%; 
    max-width: 350px; 
    height: 500px; 
    position: fixed;
    bottom: 100px; /* Separado del menú inferior */
    right: 4%; 
    display: none; 
    flex-direction: column; 
    z-index: 9000; 
    background: rgba(11, 15, 26, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(59, 130, 246, 0.3);
    box-shadow: 0 15px 50px rgba(0,0,0,0.8);
    border-radius: 24px;
    overflow: hidden;
}

/* Pantalla de Carga */
#loading-screen { 
    position: fixed; 
    inset: 0; 
    background: #0b0f1a; 
    z-index: 100000; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
}

.loader-bar { width: 200px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin-top: 20px; }
.loader-progress { width: 0%; height: 100%; background: var(--vacc); transition: 0.3s; }

/* Estilo Keep para Links */
.keep-card { 
    background: rgba(255,255,255,0.03); 
    border-radius: 18px; 
    border: 1px solid rgba(255,255,255,0.1); 
    overflow: hidden; 
    margin-bottom: 16px; 
    transition: 0.3s;
}

.keep-card img { 
    width: 100%; 
    height: 130px; 
    object-fit: cover; 
    background: #1a1e2e;
}

/* Elementos Visuales */
.glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); }
.aura-btn { border: 1px solid var(--vacc); box-shadow: 0 0 10px var(--aura); transition: 0.3s; }
.tab-active { color: var(--vacc); border-bottom: 2px solid var(--vacc); opacity: 1 !important; }

/* Temas */
.gold-grad { background: linear-gradient(135deg, #0f0c08, #262112) !important; }
.cyber-grad { background: linear-gradient(135deg, #000428, #004e92) !important; }

/* Animación API Conectada */
@keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }
.api-connected { animation: pulse-green 2s infinite; border: 2px solid #22c55e !important; }

/* Ajustes de Resumen */
.line-clamp-4 { display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }

/* Forzar que el modal-open bloquee el scroll del fondo */
body.modal-open { overflow: hidden; }
/* Asegura que los formularios de Notas y Feed estén siempre al frente */
#v-notes, #v-rss {
    padding-bottom: 180px !important;
}

#v-notes button, #v-rss button {
    z-index: 50 !important;
    position: relative;
    pointer-events: auto !important;
}

/* Fix para que el selector de carpetas sea visible siempre */
#folder-target {
    background: #1a1e2e !important;
    color: white !important;
    display: block !important;
    min-width: 120px;
}
